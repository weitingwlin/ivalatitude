)
tapply(flags$population, flags$landmass, summary)
ls()
class(plant)
class(plants)
dim(plants)
nrow(plants)
ncol(plants)
object.size(plants)
names(plants)
head(plants)
head(plants,10)
tail(plants,15)
summary(plant)
summary(plants)
table(plants$Active_Growth_Period)
str(plants)
?sample
sample(1:6,4,replace = TRUE)
sample(1:6,4,replace = TRUE)
sample(1:20,10,replace = FALSE)
sample(1:20,10)
LETTERS
Sample(LETTERS)
sample(LETTERS)
flip<-sample(c(0,1),100, prob = c(0.3,0.7))
flip<-sample(c(0,1),100, replace = TRUE,prob = c(0.3,0.7))
flips<-sample(c(0,1),100, replace = TRUE,prob = c(0.3,0.7))
flips
sum(flips)
?rbinom
rbinom(1, size=100, prob =0.7)
flips2<-rbinom(100, size =1, prob=0.7)
flip2
flips2
sum(flips2)
?rnorm
rnorm(10)
rnorm(10, mean = 100, sd = 25)
rpois(5,10)
my_pois<-replicate(100,rpois(5,10))
my_pois
cm<-colMeans(my_pois)
his(cm)
hist(cm)
d1<-Sys.Date()
class(d1)
unclass(d1)
d1
d2<-as.Date("1969-01-01")
unclass(d2)
t1<-Sys.tome()
t1<-Sys.time()
t1
class(t1)
unclass(t1)
t2<-as.POSIXlt(Sys.time())
class(t2)
t2
unclass(t2)
str(unclass(t2))
t2$min
weekdays(d1)
month(t1)
months(t1)
quarters(t2)
strptime("october 17, 1986 08:24")
t3<-"october 17, 1986 08:24"
t3<-"October 17, 1986 08:24"
strptime(t3,"%B %d,%Y %H:%M")
strptime(t3,"%B %d,% Y %H:%M")
t4<-strptime(t3,"%B %d,% Y %H:%M")
t4<-strptime(t3, "%B %d, %Y %H:%M")
t4
class(t4)
Sys.time()>t1
Sys,time()-t1
Sys.time()-t1
difftime(Sys.time(), t1, units = 'days')
1
swurl
swirl()
clear
clc
getcwd
getwd
getwd()
getwd()
?cd
getwd
?getwd
swirl()
swirl(0
)
swirl()
library("swirl")
swirl()
install_from_swirl("Data Analysis")
swirl()
cars
cars$mpgcity
cars$mpgCity
myMPG<-cars$mpgCity
mean(myMPG)
median(myMPG)
table(myMPG)
19
range(cars$price)
61.9-7.4
var(cars$price)
sd(cars$price)
15
20
install_from_swirl("Regression Models")
install_from_swirl("Regression Models")
library("swirl")
swirl()
bye
bye()
swirl()
exit()
bye()
x<-[1:6]
x<-1:6
x
class(x)
as.numeric(X)
as.numeric(x)
class(x)
as.character(x)
as.numeric(x)
class(x)
m<-matrix(nrow=2,ncol=3)
m
dim(m)
attribute(m)
atribute(m)
attributes(m)
m<-matrix(1:6,nrow=2,ncol=3)
m
m<-matrix(1:3,nrow=2,ncol=3)
m
x
dim(x)<-(2,3)
dim(x)<-c(2,30)
dim(x)<-c(2,3)
x
y<-6:11
cbind(x,y)
dim(y)<-c(2,3)
cbind(x,y)
rbind(x,y)
getwd()
find.package("devtool")
find.package("devtools")
find.package("devtools")
install.package("devtools")
install.packages("devtools")
library(rtools)
library(devtools)
find_rtools()
library(swirl)
swirl
swirl()
1:20
pi:10
15:1
?`:`
seq(1,20)
seq(0,10,by=0.5)
my_seq(5,10,length = 30)
my_seq <- seq(5,10,length = 30)
install.packages('rJava',,'http://www.rforge.net/')
install.packages('rJava','http://www.rforge.net/')
install.packages('rJava', .libPaths()[1], 'http://www.rforge.net/')
install.packages("vegan")
install.packages("sem")
library(sem)
data(Klein)
Klein$P[1:21]
Klein$X[1:21]
Klein$P.lag <- c(NA,Klein$P[1:21])
Klein$X.lag <- c(NA,Klein$X[1:21])
Wg
I(Wg+Wp)
Klein.eqn1 <- tsls( C ~ P + P.lag +I(Wg+Wp),
instruments =~G + T + Wg + I(Year - 1931) + K.lag + P.lag + X.lag,
data=Klein )
klein.Wg
klein$Wg
Klein$Wg
ent
rm(list = ls())
source("D:/my_R/My_matlab_R_adapter.R")
clc()
library(sem)
library(polycor)
data(CNES)
head(CNES) #
# Do heterogeneous correlation on the dataset
hetcor(CNES, ML=TRUE)
library(polycor)
install.packages(polycor)
install.packages("polycor")
library(polycor)
R.version()
R.Version()
install.packages('stats')
install.packages("stats")
install.packages("stats")
?pca
? pca
install.packages("vegan")
library('vegan')
? pca
raw <- matrix(c(1,2,2.5, 2.5, 1,0.5, 0, 1, 2, 4, 3, 1), nrow = 6)
colnames(raw) <- c("s1","s2")
rownames(raw) <- c("r1","r2","r3","r4","r5","r6")
o.pca <-pca(raw)
source('C:/Users/Wei-Ting/Dropbox/DataCoding/R_primers/R_files/TBP_PCA1.R')
install.packages("labdsv")
install.packages("labdsv")
library('labdsv')
o.pca <-pca(raw)
o.pca
? pca
E <- o.pca$sdec^2/o.pca$totdev
E
o.pca$sdec^2
o.pca$sdev
E <- o.pca$sdev^2/o.pca$totdev
E
plot(o.pca$scores[,1], o.pca$scores[,2], type="n", asp=1)
mames(sveg)
names(sveg)
install.packages("dave")
library('dave')
names("sveg")
names(sveg)
View(CNES)
1+1
1+1
1 > 0
ls()
ls()
X<-1
typeof(X)
typeof(TRUE)
typeof("myname")
ls()
echo('Hi')
mean(1,2)
sqrt(4)
1 + 1
2 - 1
3 * 6
4 / 2
10%%3
10%/%3
10 %% 3
10 %/% 3
X <- 1:20
X/3
y <- 1:3
X/y
X+y
X*y
X <- matrix(6, nrow = 3)
X
X <- matrix(1:6, nrow = 3)
X
y <- 1:3
Y*X
y*x
y*X
Y*X
Y <- 1:3
X*Y
X <-matrix(1:6, nrow = 3)
Y <-matrix(6:1, nrow = 2)
Y
Y <-matrix(6:1, nrow = 3)
Y
X
X*Y
t(Y)
t(Y)%*%X
t(Y)*X
Z <- matrix(6:1, nrow = 2)
Z
X%*%Z
X
library('vegan')
citation("vegan")
cite()
citation()
#####################################################################
# clean up environment
rm(list = ls())
# setwd("C:/Users/Wei-Ting/Dropbox/DataCoding/my_R/R_sem")
setwd("/Users/weitinglin/Dropbox/DataCoding/my_R/R_sem")
# Check directory have been changed
getwd()
#######################################################################
# Load package and data
#### in the .csv file, **Crab burrow** was replaced by **Crabburrow**, **Cyanobacteria** by **Cyano**
### clean workspace
rm(list = ls())
### Set working directory to current folder
setwd("/Users/weitinglin/Dropbox/DataCoding/my_R/R_sem")
#### Check directory have been changed
getwd()
### create citation
citation(package ="sem")
saltexCD <- read.table("./data/saltex_SEM_CD.csv",sep =",",header = TRUE) # Diatom
### calculate covariance
covsaltexCD <- cov(saltexCD)
covsaltexCD
library(sem)
library(polycor)
saltexCD <- read.table("./data/saltex_SEM_CD.csv",sep =",",header = TRUE) # Diatom
### calculate covariance
covsaltexCD <- cov(saltexCD)
saltexCD <- read.table("./data/saltex_SEM_CD.csv",sep =",",header = TRUE) # Diatom
library("vegan")
setwd("C:/Users/Wei-Ting/Dropbox/PhD_projects/iva_latitude/code_rfiles")
Yt_ST <-read.table("Rdata/Yt_ST.csv", sep = ",") #                  , site scale
#  the explainatary variables
Xs_PL <-read.table("Rdata/Xs_PL.csv", sep = ",") # site and time, plant scale
Xs_ST <-read.table("Rdata/Xs_ST.csv", sep = ",") # site and time,
Xe_PL <-read.table("Rdata/Xe_PL.csv", sep = ",") # environmental variables, plant scale
Xe_ST <-read.table("Rdata/Xe_ST.csv", sep = ",") # (mean) environmental variables, at site scale
# the response variables
Yt_PL <-read.table("Rdata/Yt_PL.csv", sep = ",") # taxon composition, plant scale
Yt_ST <-read.table("Rdata/Yt_ST.csv", sep = ",") #                  , site scale
Yg_PL <-read.table("Rdata/Yg_PL.csv", sep = ",") # guild
Yg_ST <-read.table("Rdata/Yg_ST.csv", sep = ",")
Xs_ST
mod_tPL <- varpart(Yt_PL, ~ ., Xs_PL$Latitude, Xs_PL$Month , data = Xe_PL, transfo="log")
# class(Xs_ST)   # make sure it's data.frame
# head(Xs_ST, 3) # latitude, month
colnames(Xs_PL) <- c("Latitude", "Month")
colnames(Xs_ST) <- c("Latitude", "Month")
#  head(Xs_PL,2)
mod_tPL <- varpart(Yt_PL, ~ ., Xs_PL$Latitude, Xs_PL$Month , data = Xe_PL, transfo="log")
# ^^^ using all data in `Xe_PL`
mod_gPL <- varpart(Yg_PL, ~ ., Xs_PL$Latitude, Xs_PL$Month , data=Xe_PL, transfo="log")
mod_tST <- varpart(Yt_ST, ~ ., Xs_ST$Latitude, Xs_ST$Month , data=Xe_ST, transfo="log")
mod_gST <- varpart(Yg_ST, ~ ., Xs_ST$Latitude, Xs_ST$Month , data=Xe_ST, transfo="log")
par(mfrow = c (1,2))
p1 <- plot(mod_tPL,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant', 'Month','Latitude'))
title(main= 'Taxon-based, plant scale' )
p2 <- plot(mod_gPL,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant', 'Month','Latitude'))
title(main= 'Guild-based, plant scale' )
mod_gST
par(mfrow = c (1,2))
p1 <- plot(mod_tPL,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant', 'Latitude','Month'))
title(main= 'Taxon-based, plant scale' )
p2 <- plot(mod_gPL,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant', 'Latitude','Month'))
title(main= 'Guild-based, plant scale' )
mod_gST
par(mfrow = c (1,2))
p3 <- plot(mod_tST,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant','Latitude','Month'))
title(main= 'Taxon-based, site scale' )
p4 <- plot(mod_gST,
bg = c("hotpink","skyblue", "burlywood"),
Xnames=c('Plant', 'Latitude','Month'))
title(main= 'Guild-based, site scale' )
install("~/Dropbox/DataCoding/my_R/package/vennchart")
library(devtools)
install("~/Dropbox/DataCoding/my_R/package/vennchart")
library(devtools)
install_github("weitingwlin/vennchart")
library(vennchart)
valueParse <-function(mod)  {
a <-   mod$part$indfract$Adj.R.square
#  showvarparts(3)
A <- a[1] + a[4] + a[6] + a[7] # a + d + f + g
B <- a[2] + a[4] + a[5] + a[7] # b + d + e + g
C <- a[3] + a[5] + a[6] + a[7] # c + e + f + g
AB <- a[4] + a[7] # d + g
AC <- a[6] + a[7] # f + g
BC <- a[5] + a[7] # e + g
ABC <- a[7]
res <- a[8]
out <- list("A" = A, "B" = B, "C" = C,
"AB" = AB, "AC" = AC, "BC"= BC,
"res" = res)
return(out)
}
par(mfrow = c (1,2))
X <- valueParse(mod_tST)
L <- list("xlim" = c(-5,5), "ylim" = c(-6, 4))
Q1 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant', 'Month','Latitude'),
textadj = c(1.3,0), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Taxon-based \n Site scale")
X <- valueParse(mod_gST)
Q2 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant', 'Month','Latitude'),
textadj = c(1.3,0.2), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Guild-based \n Site scale")
par(mfrow = c (1,2))
X <- valueParse(mod_tST)
L <- list("xlim" = c(-5,5), "ylim" = c(-6, 4))
Q1 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'),
textadj = c(1.3,0), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Taxon-based \n Site scale")
X <- valueParse(mod_gST)
Q2 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'),
textadj = c(1.3,0.2), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Guild-based \n Site scale")
par(mfrow = c (1,2))
X <- valueParse(mod_tPL)
Q3 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'), digits = 2,
textadj = c(1.5,0.3), cex = 1.2, lim = L,
unit = "%")
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Taxon-based \n Plant scale")
X <- valueParse(mod_gPL)
Q4 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
lim = L,textadj = c(1.5,0.4), texts = FALSE)
# print the texts separately for more control
Q4$textspos$tpB[2] <- Q4$textspos$tpB[2] + 1
plotVennTexts(Q4$textspos, names = c('Plant','Latitude', 'Month'), digits = 2,
cex = 1.2, unit = "%")
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Guild-based \n Plant scale")
par(mfrow = c (1,2))
X <- valueParse(mod_tST)
L <- list("xlim" = c(-5,5), "ylim" = c(-6, 4))
Q1 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'),
textadj = c(1.3,0), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Taxon-based \n Site scale")
X <- valueParse(mod_gST)
Q2 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'),
textadj = c(1.3,0.2), cex = 1.2, lim = L,
unit = "%", digits = 2)
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Guild-based \n Site scale")
par(mfrow = c (1,2))
X <- valueParse(mod_tPL)
Q3 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
names = c('Plant','Latitude', 'Month'), digits = 2,
textadj = c(1.5,0.3), cex = 1.2, lim = L,
unit = "%")
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Taxon-based \n Plant scale")
X <- valueParse(mod_gPL)
Q4 <-  vennChart(A_all = X$A * 100, B_all = X$B * 100, C_all = X$C * 100,
AandB = X$AB * 100, AandC = X$AC * 100, BandC = X$BC * 100,
lim = L,textadj = c(1.5,0.4), texts = FALSE)
# print the texts separately for more control
Q4$textspos$tpB[2] <- Q4$textspos$tpB[2] + 1
plotVennTexts(Q4$textspos, names = c('Plant','Latitude', 'Month'), digits = 2,
cex = 1.2, unit = "%")
text(0, -5.8,
paste("Residual: ", as.character(round(X$res * 100, 2)) , "%"),
cex = 1.2)
title("Guild-based \n Plant scale")
